<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="style.css" type="text/css"/>
        <title>Past Paper Viewer</title>
        <!-- Feather Icons -->
        <script src="modules/feather.min.js"></script>
    </head>    
    <body>
        <main>
            <!-- Home Page -->
            <div id="menu-ui" style="margin-top: 70px; margin-left: 180px; height: 880px;">
                <h1>Past Paper Viewer</h1>
                <div id="subject-custom-container">
                    <!-- Native PDF selection -->
                    <div id="subject-container">
                        <h2><span class="notbold">Select Subject</span></h2>
                        <div id="subject-selection" class="btn-group"></div>
                    </div>
                    <!-- Load PDFs from computer -->
                    <div id="custom-container">
                        <h2 id="step-label"><span class="notbold">Load PDFs from Computer</span></h2>
                        <div id="custom-selection" class="btn-group" style="width: 600px;">
                            <input type="file" id="load-qp-button" accept="application/pdf" onchange="getCustomQP(event)">Select Question Paper</input>
                            <input type="file" id="load-mi-button" style="margin-top: 10px;" accept="application/pdf" onchange="getCustomMI(event)">Select Marking Instructions</input>
                            <input type="file" id="load-sp-button" style="margin-top: 10px;" accept="application/pdf" onchange="getCustomSP(event)">Select Supplementary Sheet (If Applicable)</input>
                            <button id="load-custom-button" style="border: none; border-top: solid 5px white; height: 60px; margin-top: 15px;">View Loaded PDFs</button>
                        </div>
                    </div>
                </div>
                <!-- Level Selection (n5/nh/ah) -->
                <div id="level-selection" class="btn-group" style="display: none;">
                    <h2 id="level-label">Select Level</h2>
                    <button id="level-back-button" style="border: none; border-bottom: solid 5px white; height: 40px; background-color: grey;">Back to Subjects</button>
                    <button id="n5-button" style="display: none;">National 5</button>
                    <button id="nh-button" style="display: none;">Higher</button>
                    <button id="ah-button" style="display: none;">Advanced Higher</button>
                </div>
                <!-- Year & Paper Selection -->
                <div id="year-paper-container" style="display: none;">
                    <h2 id="year-paper-label">Select Year & Paper</h2>
                    <div id="year-paper-holder">
                        <div id="year-selection" class="btn-group"></div>
                        <div id="paper-selection" class="btn-group"></div>
                    </div>
                </div>
            </div>
            <!-- PDF Viewer -->
            <div id="viewer-ui" style="display: none;">
                <!-- Toolbar -->
                <div id="toolbar" style="height: 70px; display: flex; flex-direction: row; justify-content: center; align-items: center;">
                    <button id="viewer-back-button" class="toolbar-button" style="width: 120px; border-radius: 15px; float: left; background-color: var(--button-grey); color: black; font-size: 14px;">Back to Papers</button>
                    <!-- Question Navigation -->
                    <div id="q-navigation">
                        <p id="question-label" style="margin-left: 15px; text-align: left;">Question: N/A</p>
                        <button id="q-nav-button" class="nav-button" style="float: right; margin-right: 5px; margin-left: auto;">
                            <i data-feather="chevron-down"></i>
                        </button>
                    </div>
                    <!-- Control Buttons -->
                    <div id="toolbar-button-holder">
                        <!-- Global Toggles -->
                        <button id="toggle-scale-button" class="toolbar-button">
                            <i data-feather="maximize"></i>
                        </button>
                        <!-- Separator -->
                        <div style="border-left: 3px solid var(--separator-grey); height: 30px; margin-left: 5px; margin-right: 5px;"></div>
                        <!-- Paper Toggles -->
                        <button title="Toggle Supplementary Sheets" id="toggle-sp-button" class="toolbar-button" style="background-color: var(--button-toggle-off);">
                            <i data-feather="file-text"></i>
                        </button>
                        <button title="Toggle Question Paper" id="toggle-qp-button" class="toolbar-button">
                            <i data-feather="book-open"></i>
                        </button>
                        <button title="Toggle Marking Instructions" id="toggle-mi-button" class="toolbar-button" style="background-color: var(--button-toggle-off);">
                            <i data-feather="pen-tool"></i>
                        </button>
                    </div>
                </div>
                <!-- PDF Viewers -->
                <div id="sidebar-viewer-holder" style="display: flex;">
                    <div id="viewer-holder" style="width: 100%">
                        <!-- Supplementary Sheet Viewer -->
                        <div id="sp-viewer" class="viewer" style="display: none;">
                            <div class="s-nav-holder">
                                <button id="sp-left-button" class="nav-button" style="float: left;">
                                    <i data-feather="chevron-left"></i>
                                </button>
                                <p id="sp-pagecount" class="pagecount">1 / 1</p>
                                <button id="sp-right-button" class="nav-button">
                                    <i data-feather="chevron-right"></i>
                                </button>
                            </div>
                            <canvas id="sp-pdf-viewer" class="pdf-viewer" style="float: right"></canvas>
                        </div>
                        <!-- Question Paper Viewer -->
                        <div id="qp-viewer" class="viewer">
                            <div class="s-nav-holder">
                                <button id="qp-left-button" class="nav-button" style="float: left;">
                                    <i data-feather="chevron-left"></i>
                                </button>
                                <p id="qp-pagecount" class="pagecount">1 / 1</p>
                                <button id="qp-right-button" class="nav-button">
                                    <i data-feather="chevron-right"></i>
                                </button>
                            </div>
                            <canvas id="qp-pdf-viewer" class="pdf-viewer" style="float: left"></canvas>
                        </div>
                        <!-- Marking Instructions Viewer -->
                        <div id="mi-viewer" class="viewer" style="display: none;">
                            <div class="s-nav-holder">
                                <button id="mi-left-button" class="nav-button" style="float: left;">
                                    <i data-feather="chevron-left"></i>
                                </button>
                                <p id="mi-pagecount" class="pagecount">1 / 1</p>
                                <button id="mi-right-button" class="nav-button">
                                    <i data-feather="chevron-right"></i>
                                </button>
                            </div>
                            <canvas id="mi-pdf-viewer" class="pdf-viewer" style="float: right"></canvas>
                        </div>
                    </div>
                    <div id="question-selection">
                        HELLO
                    </div>
                </div>
            </div>  
            <!-- Footer Pages -->
            <div id="license-ui" style="display: none;">
                <p style="margin: 0 auto; width: 500px; text-align: justify; margin-top: 20px;">
                    MIT License - Modified (Non-Commercial Use Only)
                    <br><br>
                    Copyright (c) 2024 Benjamin McEwan
                    <br><br>
                    Permission is hereby granted, free of charge, to any person obtaining a copy
                    of this software and associated documentation files (the "Software"), to deal
                    in the Software without restriction, including without limitation the rights
                    to use, copy, modify, merge, publish, distribute, sublicense, and/or 
                    copies of the Software for non-commercial purposes only, subject to the following conditions:
                    <br><br>
                    The above copyright notice and this permission notice shall be included in all
                    copies or substantial portions of the Software.
                    <br><br>
                    For any commercial use or redistribution, express written permission must be obtained 
                    from the copyright holder.
                    <br><br>
                    Redistribution Limitation Clause:
                    <br><br>
                    You are not permitted to redistribute a free version of the Software in a 
                    manner that would directly compete with or negatively impact the sale or 
                    distribution of any paid version of the Software offered by the copyright holder. 
                    This includes, but is not limited to, bundling the free version with competing 
                    products, offering the free version as part of a competing software package, 
                    or promoting the free version in a way that disparages the paid version.
                    <br><br>
                    Any violation of this clause may result in the termination of your right to use, 
                    modify, or distribute the Software, as determined by the copyright holder.
                    <br><br>
                    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
                    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
                    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
                    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
                    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
                    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
                    SOFTWARE.
                    <br><br>
                    NOTICE: THIS LICENSE APPLIES ONLY TO THE SOFTWARE AND NOT TO THE SQA MATERIALS
                    THAT HAVE BEEN PACKAGED AND REDISTRIBUTED WITHIN THE SOFTWARE.

                </p>
            </div>
            <div id="patchnotes-ui" style="display: none; margin: 0 auto; width: 500px; text-align: justify; margin-top: 20px;">
                <h2>v1.2 - 2024.05.10</h2>
                <h3>Updates</h3>
                <p>
                    - Improved Visuals for Paper Visiblility Toggles<br>
                    - Migrated from Ionicons to Feather Icons<br>
                    - Migrated from Google Fonts to local .ttf files Atkinson Hyperlegible<br>
                    - Added Dates to Patch Notes
                </p>
                <h3>Bug Fixes</h3>
                <p>
                    - Fixed reliability issues with Paper Visibility Toggles
                </p>

                <h2>v1.1 - 2024.05.06</h2>
                <h3>Updates</h3>
                <p>
                    - Renamed Application from "SQA Past Paper Viewer" to "Past Paper Viewer"<br>
                    - Added Functionality for Supplementary Sheets<br>
                    - Viewer UI Overhaul<br>
                    - Improved Custom PDF Loading<br>
                    - Updated Licensing & Added License Page
                </p>
                <h3>Bug Fixes</h3>
                <p>
                    - Fixed Paper Selection Header<br>
                    - Fixed Level's for Subject detection.<br>
                    - Fixed Various HTML/CSS Formatting Issues
                </p>

                <h2>v1.0 - 2024.05.03</h2>
                <p>- Initial Release</p>
            </div>
        </main>
        <!-- Footer -->
        <div id="footer" style="display: flex; flex-direction: row; justify-content: flex-end; align-items: center; margin-top: 50px;">
            <a href="https://www.sqa.org.uk/sqa/74903.html">Contains Redistributed SQA Past Papers</a>
            <p style="margin: 10px;">•</p>
            <a href="javascript:ShowLicense();">(c) 2024 Benjamin McEwan</a>
            <p style="margin: 10px;">•</p>
            <a href="https://docs.google.com/forms/d/e/1FAIpQLScLeYaD3txzzMaY8tYa1zMVtgP5kJkifgNjdUzTBaLIto3hiA/viewform?usp=sf_link">Feedback Form</a>
            <p style="margin: 10px;">•</p>
            <a href="javascript:ShowPatchNotes();">Patch Notes</a>
            <p style="margin: 10px;">•</p>
            <a style="margin-right: 1rem;" href="javascript:ShowHomepage();">Past Paper Viewer v1.2</a>
        </div>
        <!-- Scripts -->
        <script src="./modules/pdf.min.mjs" type="module"></script>
        <script src="./modules/pdf.worker.min.mjs" type="module"></script>
        <script src="./modules/pdf.mjs" type="module"></script>
        <script src="./js/refs/sqa_files.js"></script>
        <script src="./js/refs/display_names.js"></script>
        <script src="./js/refs/element_refs.js"></script>
        <script src="./js/viewer.js"></script>
        <script src="./js/viewer_interaction.js"></script>
        <script src="./js/main.js"></script>
        <script>
            feather.replace();
        </script>
    </body>
</html>
